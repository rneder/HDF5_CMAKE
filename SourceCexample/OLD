#
cmake_minimum_required (VERSION 3.10)
project(Convert)
enable_language(Fortran)

set (CMAKE_MODULE_PATH "${CMAKE_CURRENT_SOURCE_DIR}/cmake" )

set (CMAKE_Fortran_FLAGS "-fPIC -cpp -O3 ")

#find_package (HDF5 NAMES hdf5 COMPONENTS C ${SEARCH_TYPE})
# find_package (HDF5) # Find non-cmake built HDF5
set (HDF5_LIB_DIR     "/usr/local/hdf5/lib")
set (HDF5_INCLUDE_DIR "/usr/local/hdf5/include")
set_directory_properties(PROPERTIES INCLUDE_DIRECTORIES "${HDF5_INCLUDE_DIR}")
#set (LINK_LIBS ${LINK_LIBS} ${HDF5_C_${LIB_TYPE}_LIBRARY})
set (LINK_LIBS ${LINK_LIBS} "${HDF5_LIB_DIR}/libhdf5hl_fortran.a")
set (LINK_LIBS ${LINK_LIBS} "${HDF5_LIB_DIR}/libhdf5hl.a")
set (LINK_LIBS ${LINK_LIBS} "${HDF5_LIB_DIR}/libhdf5_fortran.a")
set (LINK_LIBS ${LINK_LIBS} "${HDF5_LIB_DIR}/libhdf5.a")

message (STATUS "LIBS ${LINK_LIBS}" )

set(SOURCE_MAIN ConvertHDF.f90 )

set( LIBS ${LINK_LIBS} )

add_executable ( Convert ${SOURCE_MAIN} )

install (TARGETS Convert DESTINATION bin)
